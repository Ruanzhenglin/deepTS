<tool id="creat_SQLitefile" name="Creat SQLite file" version="19.09">
	<description>
	</description>
	
	<command>
		Rscript ${__tool_directory__}/annotateTS/02_creat_seqlite_TSdata.R --tooldir ${__tool_directory__} --tsRes $tsRes --gtf $gtf --domain $domain 
		--expfile $expfile
		#if $creation.TStype == "pairwise" 
		--design $creation.design_file
		--out_sqlite $out_pairwiseTS_sqlite	
		#elif $creation.TStype == "time_series" 
		--design $creation.design_file
		--out_sqlite $out_timeSeriesTS_sqlite
		#elif $creation.TStype == "population"
		 --hmpfile $creation.hmpfile
		 --out_sqlite $out_popTS_sqlite
		#end if					
					
	</command>
	
	<inputs>
		<param name="tsRes" type="data" optional="True" label="TS events Matrix" />			
		<param name="gtf" type="data" optional="True" label="Genome annotation file" />
		<param name="domain" type="data" optional="True" label="Protein domain Matrix" />
		<param name="expfile" type="data" optional="True" label="Transcript expression matrix" />
		<conditional name="creation">
			<param name="TStype" type="select" label="Select TS event types?">
			    <option value="pairwise">pairwise TS event</option>				
				<option value="time_series">time-series TS event</option>
				<option value="population">popultaion TS event</option>
			</param>
			<when value="pairwise">
				<param name="design_file" type="data" optional="True" label="Pairwise Design file" help="1" />	
			</when>
			<when value="time_series">
				<param name="design_file" type="data" optional="True" label="Time-series Design file" help="1" />		
			</when>
			<when value="population">
				<param name="hmpfile" type="data" label="The genotype file" />	
			</when>			
		</conditional>	

	</inputs>
	<stdio>
		<exit_code range="1:"  level="fatal" description="Error Running creat SQLite file" />
	</stdio>	
	<outputs>		
	  	<data name="out_pairwiseTS_sqlite" label="sqtlite file for pairwise TS events exploration analysis" format="sqlite">
			<filter>creation['TStype'] == "pairwise"</filter>
		</data>	
	  	<data name="out_timeSeriesTS_sqlite" label="sqtlite file for time-series TS events exploration analysis" format="sqlite">
			<filter>creation['TStype'] == "time_series"</filter>
		</data>		
		<data name="out_popTS_sqlite" label="sqtlite file for poplutaion TS events exploration analysis" format="sqlite">
			<filter>creation['TStype'] == "population"</filter>
		</data>
	</outputs>
	
	<help>
	.. class:: infomark

    **What it does**

    This function can be used to generate a sqtlite file for TS events exploration.

	.. class:: infomark

	**Inputs**

	* **TS events result result**: Pairwise, time-series or population TS events matrix, The first column is the group or SNP ID; the second to fourth columns are genes, transcript 1 and transcript 2 IDs respectively.	

	* **Genome annotation in GTF format**: Genome annotation file in *GTF* format.

	* **Protein domain Matrix**: Protein domain Matrix in **tsv** format can be generated by **Obtain feature file** in other tools.

	* **Transcript expression matrix**: The transcript expression matrix in **tsv** format, the first row and the first column are the transcript name and sample ID, respectively.

	.. class:: infomark

	**Outputs**

	* **sqtlite file**: a sqtlite file for TS events exploration.
	</help>
</tool>

